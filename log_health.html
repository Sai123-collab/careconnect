<!DOCTYPE html>
<html>
<head>
    <title>Log Health</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link 
        rel="stylesheet" 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    >
    <style>
        body {
            background: linear-gradient(to right, #e0f7fa, #ffffff);
            min-height: 100vh;
            font-family: 'Segoe UI', sans-serif;
        }

        .form-container {
            max-width: 600px;
            margin: auto;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        h2, h4 {
            text-align: center;
            color: #00796b;
        }

        button {
            width: 100%;
        }

        .meal-entry {
            padding: 8px;
            border-bottom: 1px solid #ccc;
            position: relative;
        }

        .delete-btn {
            position: absolute;
            right: 0;
            top: 5px;
            cursor: pointer;
            color: red;
        }

        .total-calories {
            font-weight: bold;
            color: #00796b;
            text-align: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="form-container">
        <h2>Log Today‚Äôs Health</h2>
        <form method="POST" onsubmit="return validateMeals()">
            <div class="mb-3">
                <label for="date" class="form-label">Date</label>
                <input class="form-control" type="date" id="date" name="date" required>
            </div>

            <div class="mb-3">
                <label for="weight" class="form-label">Weight (kg)</label>
                <input class="form-control" type="number" step="0.1" id="weight" name="weight" placeholder="e.g., 70.5" required>
            </div>

            <div class="mb-3">
                <label for="height" class="form-label">Height (cm)</label>
                <input class="form-control" type="number" step="0.1" id="height" name="height" placeholder="e.g., 175" required>
            </div>

            <h4>Meals</h4>
            <div class="mb-3">
                <label for="meal" class="form-label">Meal Name</label>
                <input class="form-control" type="text" id="meal" list="meal-list" placeholder="e.g., Rice">
            </div>
            <datalist id="meal-list">
                <option value="Banana">
                <option value="Apple">
                <option value="Rice">
                <option value="Chapati">
                <option value="Egg">
                <option value="Milk">
                <option value="Bread">
                <option value="Idli">
                <option value="Dosa">
                <option value="Dal">
                <option value="Curd">
            </datalist>

            <div class="mb-3">
                <label for="calories" class="form-label">Calories</label>
                <input class="form-control" type="number" id="calories" placeholder="e.g., 350">
            </div>

            <div class="mb-3 d-grid gap-2 d-md-flex justify-content-md-between">
                <button type="button" class="btn btn-primary w-100 me-md-2" onclick="addMeal()">‚ûï Add Meal</button>
            </div>

            <div id="mealList" class="mb-3"></div>
            <div class="total-calories" id="totalCaloriesDisplay">Total Calories: 0 kcal</div>

            <button class="btn btn-success mt-3">‚úÖ Submit</button>
        </form>
    </div>
</div>

<script>
    const foodCalories = {
        "banana": 89,
        "apple": 52,
        "rice": 130,
        "chapati": 70,
        "egg": 78,
        "milk": 103,
        "bread": 66,
        "idli": 39,
        "dosa": 133,
        "dal": 104,
        "curd": 61
    };

    const mealInput = document.getElementById("meal");
    const caloriesInput = document.getElementById("calories");
    const mealListDiv = document.getElementById("mealList");
    const totalDisplay = document.getElementById("totalCaloriesDisplay");

    let totalCalories = 0;

    mealInput.addEventListener("input", () => {
        const food = mealInput.value.toLowerCase().trim();
        if (foodCalories[food]) {
            caloriesInput.value = foodCalories[food];
        }
    });

    function addMeal() {
        const meal = mealInput.value.trim();
        const calories = parseInt(caloriesInput.value.trim());

        if (!meal || isNaN(calories)) {
            alert("Please enter valid meal and calorie values.");
            return;
        }

        const div = document.createElement("div");
        div.classList.add("meal-entry");

        div.innerHTML = `
            üçΩÔ∏è <strong>${meal}</strong> - ${calories} kcal 
            <span class="delete-btn" onclick="removeMeal(this, ${calories})">‚úñÔ∏è</span>
            <input type="hidden" name="meal" value="${meal}">
            <input type="hidden" name="calories" value="${calories}">
        `;

        mealListDiv.appendChild(div);

        totalCalories += calories;
        totalDisplay.innerText = `Total Calories: ${totalCalories} kcal`;

        mealInput.value = "";
        caloriesInput.value = "";
    }

    function removeMeal(btn, cal) {
        const entry = btn.parentElement;
        mealListDiv.removeChild(entry);
        totalCalories -= cal;
        totalDisplay.innerText = `Total Calories: ${totalCalories} kcal`;
    }

    function validateMeals() {
        const meals = document.querySelectorAll('input[name="meal"]');
        const calories = document.querySelectorAll('input[name="calories"]');

        if (meals.length === 0 || calories.length === 0) {
            alert("Please add at least one meal.");
            return false;
        }
        return true;
    }
</script>
</body>
</html>
